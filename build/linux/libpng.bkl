<?xml version="1.0"?>
<makefile>
	<include file="common.bkl"/>
	
	<lib id="png">
		<libname>png$(HC_LIB64ARCH_DEFINE)</libname>
		<define>UNA_PLATFORM_LINUX=1</define>
		<define>_GNU_SOURCE</define>
		<define>_LARGEFILE_SOURCE</define>
		<define>_FILE_OFFSET_BITS=64</define>
		<include>..$(DIRSEP)..$(DIRSEP)</include>
		<include>..$(DIRSEP)..$(DIRSEP)..$(DIRSEP)zlib$(DIRSEP)</include>
		<headers>
			png.h
			pngconf.h
			pnglibconf.h
		</headers>
		<sources>
			..$(DIRSEP)..$(DIRSEP)png.c
			..$(DIRSEP)..$(DIRSEP)pngset.c
			..$(DIRSEP)..$(DIRSEP)pngget.c
			..$(DIRSEP)..$(DIRSEP)pngrutil.c
			..$(DIRSEP)..$(DIRSEP)pngtrans.c
			..$(DIRSEP)..$(DIRSEP)pngwutil.c
			..$(DIRSEP)..$(DIRSEP)pngread.c
			..$(DIRSEP)..$(DIRSEP)pngrio.c
			..$(DIRSEP)..$(DIRSEP)pngwio.c
			..$(DIRSEP)..$(DIRSEP)pngwrite.c
			..$(DIRSEP)..$(DIRSEP)pngrtran.c
			..$(DIRSEP)..$(DIRSEP)pngwtran.c
			..$(DIRSEP)..$(DIRSEP)pngmem.c
			..$(DIRSEP)..$(DIRSEP)pngerror.c
			..$(DIRSEP)..$(DIRSEP)pngpread.c
		</sources>
		<cflags>-fPIC -DPIC</cflags>
		<cflags>$(HC_ARCH_CFLAGS_DEFINE)</cflags>
		<cflags>-Wall -Wextra -Wno-unused-parameter</cflags>
		<optimize>$(HC_OPTIMIZE_ENABLE)</optimize>
		<debug-info>$(HC_DEBUG_ENABLE)</debug-info>
		<threading>multi</threading>
		<postlink-command>cp -f $(BUILDDIR)$(DIRSEP)libpng$(HC_LIB64ARCH_DEFINE).a $(BUILDDIR)$(DIRSEP)libpng$(HC_LIB64ARCH_DEFINE).lib</postlink-command>
		<postlink-command>mkdir -p $(RELEASE_LIB_DIR)</postlink-command>
		<postlink-command>cp -f $(BUILDDIR)$(DIRSEP)libpng$(HC_LIB64ARCH_DEFINE).lib $(RELEASE_LIB_DIR)</postlink-command>
	</lib>

</makefile>
